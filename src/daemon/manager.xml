<!DOCTYPE node PUBLIC "-//freedesktop//DTD D-BUS Object Introspection 1.0//EN"
"http://www.freedesktop.org/standards/dbus/1.0/introspect.dtd">

<node name="/com/ubuntu/OnlineAccounts/Manager">
  <interface name="com.ubuntu.OnlineAccounts.Manager">

    <!--
        GetAccounts: returns a list of account IDs that satisfy the given
        filters.
    -->
    <method name="GetAccounts">
      <arg name="filters" type="a{sv}" direction="in" />
      <arg name="details" type="a(ua{sv})" direction="out" />
      <annotation name="org.qtproject.QtDBus.QtTypeName.In0" value="QVariantMap"/>
      <annotation name="org.qtproject.QtDBus.QtTypeName.Out0" value="QList&lt;AccountData>"/>
    </method>

    <!--
        Authenticate: request authentication credentials for the given
        account ID in the context of a particualr service.

        If "interactive" is false, an error will be returned if
        user interaction would be required to retrieve the
        credentials.

        If "invalidate" is true, any stored credentials will be
        ignored and new credentials will be requested from the account
        provider.
    -->
    <method name="Authenticate">
      <arg name="accountId" type="u" direction="in" />
      <arg name="serviceId" type="s" direction="in" />
      <arg name="interactive" type="b" direction="in" />
      <arg name="invalidate" type="b" direction="in" />
      <arg name="parameters" type="a{sv}" direction="in" />
      <arg name="credentials" type="a{sv}" direction="out" />
      <annotation name="org.qtproject.QtDBus.QtTypeName.In4" value="QVariantMap"/>
      <annotation name="org.qtproject.QtDBus.QtTypeName.Out0" value="QVariantMap"/>
    </method>

    <!--
        RequestAccess: register a new account for use with the given
        service.

        The result or error will be delivered over the socket provided
        by the client.
    -->
    <method name="RequestAccess">
      <arg name="applicationId" type="s" direction="in" />
      <arg name="serviceId" type="s" direction="in" />
      <arg name="details" type="(ua{sv})" direction="out" />
      <annotation name="org.qtproject.QtDBus.QtTypeName.Out0" value="AccountData"/>
    </method>

    <!--
        AccountChanged: emitted when account details are changed.

        The actual changed account details can be retrieved with
        GetAccounts().
    -->
    <signal name="AccountChanged">
      <arg name="accountId" type="u" />
      <!-- Change types
          enum { enabled, disabled, deleted, changed }
      -->
      <arg name="changeType" type="u" /> 
    </signal>

  </interface>
</node>
